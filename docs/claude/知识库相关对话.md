 AI模块扩展 (app/ai/)

  - llm/types.py -
  添加了EmbeddingRequest、EmbeddingResponse等embedding相关类型定义
  - llm/embedding.py - BaseEmbeddingClient抽象基类
  - llm/providers/volcengine_embedding.py - 火山引擎embedding客户端实现
  - prompts/generate_question_variants.md - AI生成问题变体的prompt模板
  - prompts/prompt_config.py - 添加了变体生成的配置

  2. 数据库模型 (app/models/)

  - job_knowledge_base.py - 主知识库表（支持pgvector的2048维向量）
  - knowledge_question_variant.py - 问题变体表
  - knowledge_hit_log.py - 检索命中日志表
  - 已更新 models/__init__.py 导出新模型

  3. Pydantic Schemas (app/schemas/)

  - job_knowledge.py - 完整的schemas定义：
    - 枚举：ScopeType、SearchMethod、VariantSource
    - CRUD schemas：Create、Update、Response、List
    - 批量操作：BatchCreate、BatchCreateResponse
    - 检索：SearchRequest、SearchResult、SearchResponse
    - 数据分析：HotQuestions、MissedQuestions、CoverageStats

  4. 服务层 (app/services/)

  - knowledge_embedding_service.py - Embedding生成服务
    - 单条同步生成（保证用户体验）
    - 批量异步生成（使用ThreadPoolExecutor）
    - 使用火山引擎doubao-embedding-large-text-250515模型
  - knowledge_search_service.py - 混合检索服务
    - 向量检索（使用PostgreSQL的cosine_distance）
    - BM25全文检索（使用ts_rank_cd）
    - 混合检索（RRF融合算法，k=60）
    - 简单过滤（按时间排序）
    - 支持主问题+变体双重检索
  - job_knowledge_service.py - 核心业务逻辑
    - CRUD操作（自动生成embedding）
    - 批量导入（异步生成embedding）
    - 问题变体管理（手动添加、AI生成、删除）
    - 内部检索接口（供对话服务调用，自动记录日志）
    - 数据分析（热门问题、未命中问题、覆盖率统计）

  5. API路由 (app/api/v1/)

  - job_knowledge.py - 完整的REST API接口：
    - CRUD: GET/POST/PUT/DELETE /knowledge
    - 批量: POST /knowledge/batch
    - 变体管理:
        - GET /knowledge/{id}/variants
      - POST /knowledge/{id}/variants
      - POST /knowledge/{id}/variants/ai-generate
      - DELETE /variants/{id}
    - 数据分析:
        - GET /knowledge/analytics/hot-questions
      - GET /knowledge/analytics/missed-questions
      - GET /knowledge/analytics/coverage
  - 已注册到 router.py 主路由器